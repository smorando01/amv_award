RewriteEngine On

# Bloquear archivos sensibles
RedirectMatch 404 ^/(\.env|schema\.sql|bootstrap\.php|composer\.json|composer\.lock)$
RedirectMatch 404 ^/(src|vendor|config|storage)(/|$)

# API
RewriteCond %{REQUEST_URI} ^/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api/(.*)$ /api/index.php [QSA,L]

# SPA
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]
